# _*_ utf-8 _*_
# Time : 2022/10/10 20:02
# FILE : 15urllib_代理
# PROJECT : Python爬虫
# Author : kkk
import urllib.request

url = 'https://www.baidu.com/s?wd=ip'
headers = {
    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36',
    'Cookie': 'BD_UPN=12314753; BIDUPSID=B05CD0769A4E7C72D4C27FABD60489D6; PSTM=1659177246; BAIDUID=2DB34079B7985E4F21E9F78F0608898A:FG=1; BDORZ=B490B5EBF6F3CD402E515D22BCDA1598; BA_HECTOR=8la0000k0k8l84018l8177801hk75981a; ZFY=vXmI:AnIbdLlvZTsSqncVo2CoSXgZS7RYdinqqZvmpuU:C; BAIDUID_BFESS=2DB34079B7985E4F21E9F78F0608898A:FG=1; BD_HOME=1; H_PS_PSSID=36544_37561_36884_34812_37403_37405_36786_26350_37344_37364; delPer=0; BD_CK_SAM=1; shifen[353782017499_43497]=1665403743; BCLID=9602625277981863192; BCLID_BFESS=9602625277981863192; BDSFRCVID=X_FOJeC62xPvVBnjOK5EtBpNYFrOHNTTH6aoHj7ZklX07ugSBM3jEG0PKU8g0KubRh6TogKKLgOTHpkF_2uxOjjg8UtVJeC6EG0Ptf8g0f5; BDSFRCVID_BFESS=X_FOJeC62xPvVBnjOK5EtBpNYFrOHNTTH6aoHj7ZklX07ugSBM3jEG0PKU8g0KubRh6TogKKLgOTHpkF_2uxOjjg8UtVJeC6EG0Ptf8g0f5; H_BDCLCKID_SF=tbADoCK2JKt3jRjd5bO2qRIJMfcKbJQKaDQ03Ru8Kb7VbUn3QxnkbfJBDl7T-q5GaDQ9aK5Nbpo28xTDKxn1Xl07yajK2MvBJaQWWUPMJ-5JVpoEDP6pQT8ryn_OK5OibCrNBIQmab3vOpRTXpO1K-PzBN5thURB2DkO-4bCWJ5TMl5jDh3Mb6ksDMDtqtJHKbDt_D8-tfK; H_BDCLCKID_SF_BFESS=tbADoCK2JKt3jRjd5bO2qRIJMfcKbJQKaDQ03Ru8Kb7VbUn3QxnkbfJBDl7T-q5GaDQ9aK5Nbpo28xTDKxn1Xl07yajK2MvBJaQWWUPMJ-5JVpoEDP6pQT8ryn_OK5OibCrNBIQmab3vOpRTXpO1K-PzBN5thURB2DkO-4bCWJ5TMl5jDh3Mb6ksDMDtqtJHKbDt_D8-tfK; Hm_lvt_aec699bb6442ba076c8981c6dc490771=1662978202,1665069742,1665141917,1665403803; PSINO=7; B64_BOT=1; H_PS_645EC=2b95FG8uJEpGFzTijVYcL8z6iC%2FRLVZRey6u679FcrkdZhFb72DdNlI8r50; baikeVisitId=153bb874-cd8d-4b49-9d66-c76783971e10; COOKIE_SESSION=8_4_9_9_8_19_1_1_6_4_0_4_28498_333796_0_0_1665403768_1665403745_1665403843%7C9%23333807_53_1665403740%7C9; Hm_lpvt_aec699bb6442ba076c8981c6dc490771=1665403925'
}
request = urllib.request.Request(url=url,headers=headers)
# 创建代理字典
proxy = {
    'http': '117.114.149.66:55443'
}
# 使用代理handler
handler = urllib.request.ProxyHandler(proxies=proxy)
opener = urllib.request.build_opener(handler)
res = opener.open(request)
content = res.read().decode('utf-8')

# 写入文件
with open('demo/baidu_proxyHandler.html', 'w' , encoding='utf-8') as fp:
    fp.write(content)